<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Leader Board</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="lb-style.css">
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
          <div class="container-fluid">
            <a class="navbar-brand" href="/">
              <img src="./images/shoutAIicon.png" alt="Avatar Logo" style="width:40px;" class="rounded-pill"> 
            </a>
            <div class="container-fluid">
              <ul class="navbar-nav">
               <li class="nav-item">
                  <a class="nav-link" href="#">LeaderBoard</a>
               </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <h4 class="text-center"> Top Ranked players</h4>
      <h6 class="text-center">click the leaderboard button to see the top players</h6><div class="wrapper">
	<div class="lboard_section">
		<div class="lboard_tabs">
			<div class="tabs">
				<ul>
					<li class="active" data-li="today">Leader Board</li>
				</ul>
			</div>
		</div>

		<div class="lboard_wrap">
			<div class="lboard_item today" style="display: none;">
<!-- 				<div class="lboard_mem">
					<div class="name_bar">
						<p><span>1.</span> Charles John</p>
						<div class="bar_wrap">
							<div class="inner_bar" style="width: 95%"></div>
						</div>
					</div>
					<div class="points">
						195 points
					</div>
				</div>
				<div class="lboard_mem">
					<div class="name_bar">
						<p><span>2.</span>Alex Mike</p>
						<div class="bar_wrap">
							<div class="inner_bar" style="width: 80%"></div>
						</div>
					</div>
					<div class="points">
						185 points
					</div>
				</div>
				<div class="lboard_mem">
					<div class="img">
						<img src="pic_3.png" alt="picture_2">
					</div> 
					<div class="name_bar">
						<p><span>3.</span>Johnson</p>
						<div class="bar_wrap">
							<div class="inner_bar" style="width: 60%;"></div>
						</div>
					</div>
					<div class="points">
						160 points
					</div>
				</div>
				<div class="lboard_mem">
				<div class="img">
						<img src="pic_4.png" alt="picture_1">
					</div> 
					<div class="name_bar">
						<p><span>4.</span>Rosey</p>
						<div class="bar_wrap">
							<div class="inner_bar" style="width: 30%"></div>
						</div>
					</div>
					<div class="points">
						130 points
					</div>
				</div>
				<div class="lboard_mem">
					<div class="img">
						<img src="pic_5.png" alt="picture_2">
					</div> 
					<div class="name_bar">
						<p><span>5.</span>Scarlett Angela</p>
						<div class="bar_wrap">
							<div class="inner_bar" style="width: 10%"></div>
						</div>
					</div>
					<div class="points">
						110 points
					</div>
				</div> -->

                <div id="myDataTest" > </div>
                    
                  <script>
                        fetch('/api/leaderboard', {
                            method: "GET",
                             headers: {
                                
                                "Content-Type": "application/json"
                                
                            }, 
                        })
                            .then(function (response) {
                                return response.json();
                            })
                            .then(function (testData) {
                                appendData(testData);
                            })
                            .catch(function (err) {
                                console.log('error: ' + err);
                            });
                        function appendData(testData) {
                            
                            var mainContainer = document.getElementById("myDataTest");
                            for (var i = 0; i < 5; i++) {
                                var innerMainContainer = document.createElement("div");
                                innerMainContainer.classList.add("lboard_mem");

                                var divName = document.createElement("div");
                                divName.classList.add("name_bar");
                                divName.innerHTML = testData[i].username;
                                innerMainContainer.appendChild(divName);

                                var divBar = document.createElement("div");
                                divBar.classList.add("bar_wrap");
                                innerMainContainer.appendChild(divBar);

                                var divInnerBar = document.createElement("div");
                                divInnerBar.classList.add("inner_bar","bar_wrap");

                                divInnerBar.style.width = testData[i].score.toString() + '%' ;
                                innerMainContainer.appendChild(divInnerBar);

                                var divScore= document.createElement("div");
                                divScore.classList.add("points");
                                divScore.innerHTML = testData[i].score + ' Points';
                                innerMainContainer.appendChild(divScore);


                                
                                
                                mainContainer.appendChild(innerMainContainer);
                                


                            }
                        }
                    </script> 
<!--                 <script>
                         fetch('/api/leaderboard', {
                            method: "GET",
                             headers: {
                                
                                "Content-Type": "application/json"
                                
                            }, 
                        })
                            .then(response => {
                                console.log("success")
                                console.log(response)
                                return response.json();
                            }
                            )
                            .then(scores => {
                                console.log(scores)
                            }); -->
<!--                             let request = new XMLHttpRequest();
                            //request.open("GET", "https://jsonplaceholder.typicode.com/users");
                            request.open("GET", "http://127.0.0.1:5000/api/leaderboard");
                            request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                            request.setRequestHeader('Access-Control-Allow-Origin', '*',);
                           
                            request.onreadystatechange = function() {//Call a function when the state changes.
                                if(request.readyState == 4 && request.status == 200) {
                                    console.log("request successful");
                                }
                            }
                            request.send();  -->


 
         
                </script>
                
			</div>

		</div>
	</div>
</div>	

<script src="lbscript.js"></script>
</body>
</html>